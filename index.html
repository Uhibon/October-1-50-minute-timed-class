<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boo-riculum â€“ Vehicles Deck</title>
  <link rel="icon" type="image/png" href="booha-ghost.png">
  <style>
    :root { --ink:#222; --muted:#444; --accent:#0b78ff; --ok:#22c55e; --bad:#ef4444; }
    html,body{height:100%;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
      color:var(--ink);
      background:url('booha-card.jpg') center/cover fixed no-repeat;
    }
    .wrap{max-width:900px;margin:0 auto;padding:16px 16px 24px;}
    header{
      display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;
      margin-bottom:12px;background:rgba(255,255,255,0.88);padding:12px 16px;
      border-radius:16px;box-shadow:0 4px 10px rgba(0,0,0,0.15)
    }
    header h1{
      font-size:18px;margin:0;font-weight:700;letter-spacing:.2px;
      background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      display:flex;align-items:center;gap:8px
    }
    header h1 img{height:28px;width:auto;}
    .controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    select,button{
      background:rgba(255,255,255,0.95);color:var(--ink);border:1px solid #ccc;
      border-radius:12px;padding:10px 12px;font-size:14px;
      box-shadow:0 2px 5px rgba(0,0,0,0.08)
    }
    button{cursor:pointer;transition:transform .05s ease, background .2s}
    button:hover{background:#f0f0f0}
    button:active{transform:scale(.98)}
    .pill{border:1px solid #ccc;border-radius:999px;padding:6px 10px;font-size:12px;background:rgba(255,255,255,0.7)}
    .card{
      user-select:none;-webkit-user-select:none;display:flex;flex-direction:column;justify-content:center;align-items:center;
      text-align:center;background:url('booha-card.jpg') center/cover no-repeat;
      border:1px solid #ccc;border-radius:24px;min-height:56vh;margin:16px auto;padding:22px 18px 28px;
      box-shadow:0 10px 40px rgba(0,0,0,.25); position:relative;
    }
    .brand{
      position:absolute;top:10px;left:12px;display:flex;gap:8px;align-items:center;
      background:rgba(255,255,255,0.85);padding:6px 10px;border-radius:12px;border:1px solid #ddd;
      box-shadow:0 2px 6px rgba(0,0,0,0.08); font-weight:800; letter-spacing:.2px;
    }
    .brand img{height:20px;width:auto}
    .brand span{background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .label{color:var(--muted);font-size:13px;letter-spacing:.3px;margin-bottom:8px;
      background:rgba(255,255,255,0.7);padding:4px 8px;border-radius:8px}
    .main{font-size:28px;line-height:1.25;font-weight:800;margin:8px 0 10px;
      background:rgba(255,255,255,0.86);padding:8px 12px;border-radius:12px}
    .sub{font-size:18px;opacity:.92;margin:0 0 6px;background:rgba(255,255,255,0.65);
      padding:4px 10px;border-radius:8px}
    .hira{font-size:18px;color:var(--accent);opacity:.95;background:rgba(255,255,255,0.75);
      padding:4px 10px;border-radius:8px}
    .muted{color:var(--muted)}
    .row{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    .footer{
      display:flex;align-items:center;justify-content:space-between;margin-top:8px;color:var(--muted);font-size:13px;
      background:rgba(255,255,255,0.85);padding:8px 12px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1)
    }
    .progress{height:8px;border-radius:999px;background:#eee;overflow:hidden}
    .progress>span{display:block;height:100%;background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);width:0%}
    .hidden{display:none}
    .options{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px}
    .optbtn{border:1px solid #ccc;border-radius:12px;padding:10px 14px;background:rgba(255,255,255,0.95);cursor:pointer}
    .optbtn.ok{background:#dcfce7;border-color:#86efac;color:#166534}
    .optbtn.bad{background:#fee2e2;border-color:#fca5a5;color:#991b1b}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1><img src="booha-ghost.png" alt="Booha ghost"> Boo-riculum â€“ Vehicles</h1>
      <div class="controls">
        <select id="mode" aria-label="Mode">
          <option value="vocab-j2e">Vocab: ğŸ‡¯ğŸ‡µ â†’ ğŸ‡ºğŸ‡¸</option>
          <option value="vocab-e2j">Vocab: ğŸ‡ºğŸ‡¸ â†’ ğŸ‡¯ğŸ‡µ</option>
          <option value="sentences">Sentences (practice)</option>
          <option value="qa">Questions (practice)</option>
          <option value="quiz">Quiz (multiple choice)</option>
          <option value="reading">Reading</option>
        </select>
      </div>
    </header>

    <div id="card" class="card" role="button" aria-label="flashcard" tabindex="0">
      <div class="brand"><img src="booha-ghost.png" alt="Booha ghost"><span>Boo-riculum</span></div>
      <div id="label" class="label">Front</div>
      <div id="main" class="main">â€”</div>
      <div id="sub" class="sub muted">Tap or press Space to flip</div>
      <div id="hira" class="hira hidden"></div>
      <div id="mcArea" class="options hidden"></div>
    </div>

    <div class="footer">
      <div class="row">
        <span class="pill">Keyboard: â† â†’</span>
        <span class="pill">Space = Flip</span>
        <button id="btnPrev">â—€ï¸ Prev</button>
        <button id="btnFlip">Flip</button>
        <button id="btnNext">Next â–¶ï¸</button>
        <button id="btnShuffle">Shuffle</button>
      </div>
      <div style="min-width:180px;text-align:right">
        <div id="counter" class="muted">0 / 0</div>
        <div class="progress"><span id="bar"></span></div>
      </div>
    </div>
  </div>

  <script>
    // ---------------- Data ----------------
    // Vocabulary (Vehicles)
    const VEHICLES = [
      { en: 'car',        ja: 'è»Š',       hira: 'ãã‚‹ã¾' },
      { en: 'bus',        ja: 'ãƒã‚¹',     hira: 'ã°ã™' },
      { en: 'train',      ja: 'é›»è»Š',     hira: 'ã§ã‚“ã—ã‚ƒ' },
      { en: 'bicycle',    ja: 'è‡ªè»¢è»Š',   hira: 'ã˜ã¦ã‚“ã—ã‚ƒ' },
      { en: 'motorcycle', ja: 'ãƒã‚¤ã‚¯',   hira: 'ã°ã„ã' },
      { en: 'truck',      ja: 'ãƒˆãƒ©ãƒƒã‚¯', hira: 'ã¨ã‚‰ã£ã' },
      { en: 'airplane',   ja: 'é£›è¡Œæ©Ÿ',   hira: 'ã²ã“ã†ã' },
      { en: 'boat',       ja: 'ãƒœãƒ¼ãƒˆ',   hira: 'ã¼ãƒ¼ã¨' },
      { en: 'subway',     ja: 'åœ°ä¸‹é‰„',   hira: 'ã¡ã‹ã¦ã¤' },
      { en: 'taxi',       ja: 'ã‚¿ã‚¯ã‚·ãƒ¼', hira: 'ãŸãã—ãƒ¼' },
    ];

    // Sentences (EN â†’ JA + hira) â€” includes Taxi (#10)
    const SENTENCES = [
      { en: 'There is a car in the parking lot.', ja: 'é§è»Šå ´ã«è»ŠãŒã‚ã‚Šã¾ã™ã€‚', hira: 'ã¡ã‚…ã†ã—ã‚ƒã˜ã‚‡ã† ã« ãã‚‹ã¾ ãŒ ã‚ã‚Šã¾ã™' },
      { en: 'The car is blue.', ja: 'ãã®è»Šã¯é’ã„ã§ã™ã€‚', hira: 'ãã® ãã‚‹ã¾ ã¯ ã‚ãŠã„ ã§ã™' },

      { en: 'There are many buses at the station.', ja: 'é§…ã«ãƒã‚¹ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚', hira: 'ãˆã ã« ã°ã™ ãŒ ãŸãã•ã‚“ ã‚ã‚Šã¾ã™' },
      { en: 'The bus is yellow.', ja: 'ãã®ãƒã‚¹ã¯é»„è‰²ã§ã™ã€‚', hira: 'ãã® ã°ã™ ã¯ ãã„ã‚ ã§ã™' },

      { en: 'There is a train coming soon.', ja: 'ã™ãã«é›»è»ŠãŒæ¥ã¾ã™ã€‚', hira: 'ã™ã ã« ã§ã‚“ã—ã‚ƒ ãŒ ãã¾ã™' },
      { en: 'The train is fast.', ja: 'ãã®é›»è»Šã¯é€Ÿã„ã§ã™ã€‚', hira: 'ãã® ã§ã‚“ã—ã‚ƒ ã¯ ã¯ã‚„ã„ ã§ã™' },

      { en: 'There is a bicycle in front of the house.', ja: 'å®¶ã®å‰ã«è‡ªè»¢è»ŠãŒã‚ã‚Šã¾ã™ã€‚', hira: 'ã„ãˆ ã® ã¾ãˆ ã« ã˜ã¦ã‚“ã—ã‚ƒ ãŒ ã‚ã‚Šã¾ã™' },
      { en: 'The bicycle is old but reliable.', ja: 'ãã®è‡ªè»¢è»Šã¯å¤ã„ã§ã™ãŒã€ä¿¡é ¼ã§ãã¾ã™ã€‚', hira: 'ãã® ã˜ã¦ã‚“ã—ã‚ƒ ã¯ ãµã‚‹ã„ ã§ã™ãŒã€ ã—ã‚“ã‚‰ã„ ã§ãã¾ã™' },

      { en: 'There is a motorcycle in the garage.', ja: 'ã‚¬ãƒ¬ãƒ¼ã‚¸ã«ãƒã‚¤ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚', hira: 'ãŒã‚Œãƒ¼ã˜ ã« ã°ã„ã ãŒ ã‚ã‚Šã¾ã™' },
      { en: 'The motorcycle is loud.', ja: 'ãã®ãƒã‚¤ã‚¯ã¯ã†ã‚‹ã•ã„ã§ã™ã€‚', hira: 'ãã® ã°ã„ã ã¯ ã†ã‚‹ã•ã„ ã§ã™' },

      { en: 'There is a truck delivering goods.', ja: 'å•†å“ã‚’å±Šã‘ã¦ã„ã‚‹ãƒˆãƒ©ãƒƒã‚¯ãŒã‚ã‚Šã¾ã™ã€‚', hira: 'ã—ã‚‡ã†ã²ã‚“ ã‚’ ã¨ã©ã‘ã¦ã„ã‚‹ ã¨ã‚‰ã£ã ãŒ ã‚ã‚Šã¾ã™' },
      { en: 'The truck is big and powerful.', ja: 'ãã®ãƒˆãƒ©ãƒƒã‚¯ã¯å¤§ããã¦åŠ›å¼·ã„ã§ã™ã€‚', hira: 'ãã® ã¨ã‚‰ã£ã ã¯ ãŠãŠããã¦ ã¡ã‹ã‚‰ã¥ã‚ˆã„ ã§ã™' },

      { en: 'There is an airplane flying in the sky.', ja: 'ç©ºã«é£›ã‚“ã§ã„ã‚‹é£›è¡Œæ©ŸãŒã‚ã‚Šã¾ã™ã€‚', hira: 'ãã‚‰ ã« ã¨ã‚“ã§ã„ã‚‹ ã²ã“ã†ã ãŒ ã‚ã‚Šã¾ã™' },
      { en: 'The airplane is white with blue stripes.', ja: 'ãã®é£›è¡Œæ©Ÿã¯ç™½ãã¦é’ã„ã‚¹ãƒˆãƒ©ã‚¤ãƒ—ãŒã‚ã‚Šã¾ã™ã€‚', hira: 'ãã® ã²ã“ã†ã ã¯ ã—ã‚ãã¦ ã‚ãŠã„ ã™ã¨ã‚‰ã„ã· ãŒ ã‚ã‚Šã¾ã™' },

      { en: 'There is a boat on the lake.', ja: 'æ¹–ã«ãƒœãƒ¼ãƒˆãŒã‚ã‚Šã¾ã™ã€‚', hira: 'ã¿ãšã†ã¿ ã« ã¼ãƒ¼ã¨ ãŒ ã‚ã‚Šã¾ã™' },
      { en: 'The boat is small but fast.', ja: 'ãã®ãƒœãƒ¼ãƒˆã¯å°ã•ã„ã‘ã©é€Ÿã„ã§ã™ã€‚', hira: 'ãã® ã¼ãƒ¼ã¨ ã¯ ã¡ã„ã•ã„ ã‘ã© ã¯ã‚„ã„ ã§ã™' },

      { en: 'There is a subway station near my house.', ja: 'ç§ã®å®¶ã®è¿‘ãã«åœ°ä¸‹é‰„é§…ãŒã‚ã‚Šã¾ã™ã€‚', hira: 'ã‚ãŸã— ã® ã„ãˆ ã® ã¡ã‹ã ã« ã¡ã‹ã¦ã¤ãˆã ãŒ ã‚ã‚Šã¾ã™' },
      { en: 'The subway is crowded during rush hour.', ja: 'ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒ¯ãƒ¼ã®æ™‚ã€åœ°ä¸‹é‰„ã¯æ··ã‚“ã§ã„ã¾ã™ã€‚', hira: 'ã‚‰ã£ã—ã‚…ã‚ã‚ãƒ¼ ã® ã¨ãã€ ã¡ã‹ã¦ã¤ ã¯ ã“ã‚“ã§ã„ã¾ã™' },

      { en: 'There is a taxi in front of the hotel.', ja: 'ãƒ›ãƒ†ãƒ«ã®å‰ã«ã‚¿ã‚¯ã‚·ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚', hira: 'ã»ã¦ã‚‹ ã® ã¾ãˆ ã« ãŸãã—ãƒ¼ ãŒ ã‚ã‚Šã¾ã™' },
      { en: 'The taxi is cheap.', ja: 'ãã®ã‚¿ã‚¯ã‚·ãƒ¼ã¯å®‰ã„ã§ã™ã€‚', hira: 'ãã® ãŸãã—ãƒ¼ ã¯ ã‚„ã™ã„ ã§ã™' },
    ];

    // Q&A (10)
    const QA = [
      { q_en:'Where is the car?', q_ja:'è»Šã¯ã©ã“ã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', q_hira:'ãã‚‹ã¾ ã¯ ã©ã“ ã« ã‚ã‚Šã¾ã™ã‹ï¼Ÿ',
        a_en:'It is in the parking lot.', a_ja:'é§è»Šå ´ã«ã‚ã‚Šã¾ã™ã€‚', a_hira:'ã¡ã‚…ã†ã—ã‚ƒã˜ã‚‡ã† ã« ã‚ã‚Šã¾ã™ã€‚' },

      { q_en:'What color is the bus?', q_ja:'ãƒã‚¹ã¯ä½•è‰²ã§ã™ã‹ï¼Ÿ', q_hira:'ã°ã™ ã¯ ãªã«ã„ã‚ ã§ã™ã‹ï¼Ÿ',
        a_en:'It is yellow.', a_ja:'é»„è‰²ã§ã™ã€‚', a_hira:'ãã„ã‚ ã§ã™ã€‚' },

      { q_en:'What is coming soon?', q_ja:'ã™ãã«ä½•ãŒæ¥ã¾ã™ã‹ï¼Ÿ', q_hira:'ã™ã ã« ãªã« ãŒ ãã¾ã™ã‹ï¼Ÿ',
        a_en:'A train is coming soon.', a_ja:'é›»è»ŠãŒæ¥ã¾ã™ã€‚', a_hira:'ã§ã‚“ã—ã‚ƒ ãŒ ãã¾ã™ã€‚' },

      { q_en:'Where is the bicycle?', q_ja:'è‡ªè»¢è»Šã¯ã©ã“ã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', q_hira:'ã˜ã¦ã‚“ã—ã‚ƒ ã¯ ã©ã“ ã« ã‚ã‚Šã¾ã™ã‹ï¼Ÿ',
        a_en:'In front of the house.', a_ja:'å®¶ã®å‰ã«ã‚ã‚Šã¾ã™ã€‚', a_hira:'ã„ãˆ ã® ã¾ãˆ ã« ã‚ã‚Šã¾ã™ã€‚' },

      { q_en:'Is the bicycle new?', q_ja:'è‡ªè»¢è»Šã¯æ–°ã—ã„ã§ã™ã‹ï¼Ÿ', q_hira:'ã˜ã¦ã‚“ã—ã‚ƒ ã¯ ã‚ãŸã‚‰ã—ã„ ã§ã™ã‹ï¼Ÿ',
        a_en:'No, it is old but reliable.', a_ja:'ã„ã„ãˆã€å¤ã„ã§ã™ãŒä¿¡é ¼ã§ãã¾ã™ã€‚', a_hira:'ã„ã„ãˆã€ ãµã‚‹ã„ ã§ã™ãŒ ã—ã‚“ã‚‰ã„ ã§ãã¾ã™ã€‚' },

      { q_en:'Where is the motorcycle?', q_ja:'ãƒã‚¤ã‚¯ã¯ã©ã“ã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', q_hira:'ã°ã„ã ã¯ ã©ã“ ã« ã‚ã‚Šã¾ã™ã‹ï¼Ÿ',
        a_en:'It is in the garage.', a_ja:'ã‚¬ãƒ¬ãƒ¼ã‚¸ã«ã‚ã‚Šã¾ã™ã€‚', a_hira:'ãŒã‚Œãƒ¼ã˜ ã« ã‚ã‚Šã¾ã™ã€‚' },

      { q_en:'What is the truck doing?', q_ja:'ãƒˆãƒ©ãƒƒã‚¯ã¯ä½•ã‚’ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ', q_hira:'ã¨ã‚‰ã£ã ã¯ ãªã« ã‚’ ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ',
        a_en:'It is delivering goods.', a_ja:'å•†å“ã‚’å±Šã‘ã¦ã„ã¾ã™ã€‚', a_hira:'ã—ã‚‡ã†ã²ã‚“ ã‚’ ã¨ã©ã‘ã¦ ã„ã¾ã™ã€‚' },

      { q_en:'Where is the airplane?', q_ja:'é£›è¡Œæ©Ÿã¯ã©ã“ã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', q_hira:'ã²ã“ã†ã ã¯ ã©ã“ ã« ã‚ã‚Šã¾ã™ã‹ï¼Ÿ',
        a_en:'It is flying in the sky.', a_ja:'ç©ºã«é£›ã‚“ã§ã„ã¾ã™ã€‚', a_hira:'ãã‚‰ ã« ã¨ã‚“ã§ ã„ã¾ã™ã€‚' },

      { q_en:'Where is the subway station?', q_ja:'åœ°ä¸‹é‰„é§…ã¯ã©ã“ã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', q_hira:'ã¡ã‹ã¦ã¤ãˆã ã¯ ã©ã“ ã« ã‚ã‚Šã¾ã™ã‹ï¼Ÿ',
        a_en:'Near my house.', a_ja:'ç§ã®å®¶ã®è¿‘ãã«ã‚ã‚Šã¾ã™ã€‚', a_hira:'ã‚ãŸã— ã® ã„ãˆ ã® ã¡ã‹ã ã« ã‚ã‚Šã¾ã™ã€‚' },

      { q_en:'Where is the taxi?', q_ja:'ã‚¿ã‚¯ã‚·ãƒ¼ã¯ã©ã“ã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', q_hira:'ãŸãã—ãƒ¼ ã¯ ã©ã“ ã« ã‚ã‚Šã¾ã™ã‹ï¼Ÿ',
        a_en:'In front of the hotel.', a_ja:'ãƒ›ãƒ†ãƒ«ã®å‰ã«ã‚ã‚Šã¾ã™ã€‚', a_hira:'ã»ã¦ã‚‹ ã® ã¾ãˆ ã« ã‚ã‚Šã¾ã™ã€‚' },
    ];

    // Quiz (10) â€” vehicle-name answers for consistent 4-choice options
    const QUIZ = [
      { cloze:'There is a ___ in the parking lot.', answers:['car'], ja:'é§è»Šå ´ã«è»ŠãŒã‚ã‚Šã¾ã™ã€‚', hira:'ã¡ã‚…ã†ã—ã‚ƒã˜ã‚‡ã† ã« ãã‚‹ã¾ ãŒ ã‚ã‚Šã¾ã™', full:'There is a car in the parking lot.' },
      { cloze:'The ___ is yellow.', answers:['bus'], ja:'ãã®ãƒã‚¹ã¯é»„è‰²ã§ã™ã€‚', hira:'ãã® ã°ã™ ã¯ ãã„ã‚ ã§ã™', full:'The bus is yellow.' },
      { cloze:'A ___ is coming soon.', answers:['train'], ja:'ã™ãã«é›»è»ŠãŒæ¥ã¾ã™ã€‚', hira:'ã™ã ã« ã§ã‚“ã—ã‚ƒ ãŒ ãã¾ã™', full:'A train is coming soon.' },
      { cloze:'There is a ___ in front of the house.', answers:['bicycle'], ja:'å®¶ã®å‰ã«è‡ªè»¢è»ŠãŒã‚ã‚Šã¾ã™ã€‚', hira:'ã„ãˆ ã® ã¾ãˆ ã« ã˜ã¦ã‚“ã—ã‚ƒ ãŒ ã‚ã‚Šã¾ã™', full:'There is a bicycle in front of the house.' },
      { cloze:'There is a ___ in the garage.', answers:['motorcycle'], ja:'ã‚¬ãƒ¬ãƒ¼ã‚¸ã«ãƒã‚¤ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚', hira:'ãŒã‚Œãƒ¼ã˜ ã« ã°ã„ã ãŒ ã‚ã‚Šã¾ã™', full:'There is a motorcycle in the garage.' },
      { cloze:'There is a ___ delivering goods.', answers:['truck'], ja:'å•†å“ã‚’å±Šã‘ã¦ã„ã‚‹ãƒˆãƒ©ãƒƒã‚¯ãŒã‚ã‚Šã¾ã™ã€‚', hira:'ã—ã‚‡ã†ã²ã‚“ ã‚’ ã¨ã©ã‘ã¦ã„ã‚‹ ã¨ã‚‰ã£ã ãŒ ã‚ã‚Šã¾ã™', full:'There is a truck delivering goods.' },
      { cloze:'There is an ___ flying in the sky.', answers:['airplane'], ja:'ç©ºã«é£›ã‚“ã§ã„ã‚‹é£›è¡Œæ©ŸãŒã‚ã‚Šã¾ã™ã€‚', hira:'ãã‚‰ ã« ã¨ã‚“ã§ã„ã‚‹ ã²ã“ã†ã ãŒ ã‚ã‚Šã¾ã™', full:'There is an airplane flying in the sky.' },
      { cloze:'There is a ___ on the lake.', answers:['boat'], ja:'æ¹–ã«ãƒœãƒ¼ãƒˆãŒã‚ã‚Šã¾ã™ã€‚', hira:'ã¿ãšã†ã¿ ã« ã¼ãƒ¼ã¨ ãŒ ã‚ã‚Šã¾ã™', full:'There is a boat on the lake.' },
      { cloze:'There is a ___ station near my house.', answers:['subway'], ja:'ç§ã®å®¶ã®è¿‘ãã«åœ°ä¸‹é‰„é§…ãŒã‚ã‚Šã¾ã™ã€‚', hira:'ã‚ãŸã— ã® ã„ãˆ ã® ã¡ã‹ã ã« ã¡ã‹ã¦ã¤ãˆã ãŒ ã‚ã‚Šã¾ã™', full:'There is a subway station near my house.' },
      { cloze:'There is a ___ in front of the hotel.', answers:['taxi'], ja:'ãƒ›ãƒ†ãƒ«ã®å‰ã«ã‚¿ã‚¯ã‚·ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚', hira:'ã»ã¦ã‚‹ ã® ã¾ãˆ ã« ãŸãã—ãƒ¼ ãŒ ã‚ã‚Šã¾ã™', full:'There is a taxi in front of the hotel.' },
    ];

    // Readings (10) â€” short, simple, graded
    const READINGS = [
      { en:'There is a car in the parking lot. The car is blue.', 
        ja:'é§è»Šå ´ã«è»ŠãŒã‚ã‚Šã¾ã™ã€‚ãã®è»Šã¯é’ã„ã§ã™ã€‚', 
        hira:'ã¡ã‚…ã†ã—ã‚ƒã˜ã‚‡ã† ã« ãã‚‹ã¾ ãŒ ã‚ã‚Šã¾ã™ã€‚ ãã® ãã‚‹ã¾ ã¯ ã‚ãŠã„ ã§ã™ã€‚' },

      { en:'There are many buses at the station. One bus is yellow.', 
        ja:'é§…ã«ãƒã‚¹ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚ï¼‘å°ã¯é»„è‰²ã§ã™ã€‚', 
        hira:'ãˆã ã« ã°ã™ ãŒ ãŸãã•ã‚“ ã‚ã‚Šã¾ã™ã€‚ ã„ã¡ã ã„ ã¯ ãã„ã‚ ã§ã™ã€‚' },

      { en:'A train is coming soon. The train is fast.', 
        ja:'ã™ãã«é›»è»ŠãŒæ¥ã¾ã™ã€‚ãã®é›»è»Šã¯é€Ÿã„ã§ã™ã€‚', 
        hira:'ã™ã ã« ã§ã‚“ã—ã‚ƒ ãŒ ãã¾ã™ã€‚ ãã® ã§ã‚“ã—ã‚ƒ ã¯ ã¯ã‚„ã„ ã§ã™ã€‚' },

      { en:'There is a bicycle in front of the house. It is old but reliable.', 
        ja:'å®¶ã®å‰ã«è‡ªè»¢è»ŠãŒã‚ã‚Šã¾ã™ã€‚å¤ã„ã§ã™ãŒä¿¡é ¼ã§ãã¾ã™ã€‚', 
        hira:'ã„ãˆ ã® ã¾ãˆ ã« ã˜ã¦ã‚“ã—ã‚ƒ ãŒ ã‚ã‚Šã¾ã™ã€‚ ãµã‚‹ã„ ã§ã™ãŒ ã—ã‚“ã‚‰ã„ ã§ãã¾ã™ã€‚' },

      { en:'A motorcycle is in the garage. The motorcycle is loud.', 
        ja:'ã‚¬ãƒ¬ãƒ¼ã‚¸ã«ãƒã‚¤ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãƒã‚¤ã‚¯ã¯ã†ã‚‹ã•ã„ã§ã™ã€‚', 
        hira:'ãŒã‚Œãƒ¼ã˜ ã« ã°ã„ã ãŒ ã‚ã‚Šã¾ã™ã€‚ ãã® ã°ã„ã ã¯ ã†ã‚‹ã•ã„ ã§ã™ã€‚' },

      { en:'A truck is delivering goods. The truck is big and powerful.', 
        ja:'å•†å“ã‚’å±Šã‘ã¦ã„ã‚‹ãƒˆãƒ©ãƒƒã‚¯ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãƒˆãƒ©ãƒƒã‚¯ã¯å¤§ããã¦åŠ›å¼·ã„ã§ã™ã€‚', 
        hira:'ã—ã‚‡ã†ã²ã‚“ ã‚’ ã¨ã©ã‘ã¦ã„ã‚‹ ã¨ã‚‰ã£ã ãŒ ã‚ã‚Šã¾ã™ã€‚ ãã® ã¨ã‚‰ã£ã ã¯ ãŠãŠããã¦ ã¡ã‹ã‚‰ã¥ã‚ˆã„ ã§ã™ã€‚' },

      { en:'There is an airplane flying in the sky. It has blue stripes.', 
        ja:'ç©ºã«é£›ã‚“ã§ã„ã‚‹é£›è¡Œæ©ŸãŒã‚ã‚Šã¾ã™ã€‚é’ã„ã‚¹ãƒˆãƒ©ã‚¤ãƒ—ãŒã‚ã‚Šã¾ã™ã€‚', 
        hira:'ãã‚‰ ã« ã¨ã‚“ã§ã„ã‚‹ ã²ã“ã†ã ãŒ ã‚ã‚Šã¾ã™ã€‚ ã‚ãŠã„ ã™ã¨ã‚‰ã„ã· ãŒ ã‚ã‚Šã¾ã™ã€‚' },

      { en:'There is a boat on the lake. It is small but fast.', 
        ja:'æ¹–ã«ãƒœãƒ¼ãƒˆãŒã‚ã‚Šã¾ã™ã€‚å°ã•ã„ã‘ã©é€Ÿã„ã§ã™ã€‚', 
        hira:'ã¿ãšã†ã¿ ã« ã¼ãƒ¼ã¨ ãŒ ã‚ã‚Šã¾ã™ã€‚ ã¡ã„ã•ã„ ã‘ã© ã¯ã‚„ã„ ã§ã™ã€‚' },

      { en:'There is a subway station near my house. It is crowded at rush hour.', 
        ja:'ç§ã®å®¶ã®è¿‘ãã«åœ°ä¸‹é‰„é§…ãŒã‚ã‚Šã¾ã™ã€‚ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒ¯ãƒ¼ã¯æ··ã‚“ã§ã„ã¾ã™ã€‚', 
        hira:'ã‚ãŸã— ã® ã„ãˆ ã® ã¡ã‹ã ã« ã¡ã‹ã¦ã¤ãˆã ãŒ ã‚ã‚Šã¾ã™ã€‚ ã‚‰ã£ã—ã‚…ã‚ã‚ãƒ¼ ã¯ ã“ã‚“ã§ ã„ã¾ã™ã€‚' },

      { en:'There is a taxi in front of the hotel. The taxi is cheap.', 
        ja:'ãƒ›ãƒ†ãƒ«ã®å‰ã«ã‚¿ã‚¯ã‚·ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ãã®ã‚¿ã‚¯ã‚·ãƒ¼ã¯å®‰ã„ã§ã™ã€‚', 
        hira:'ã»ã¦ã‚‹ ã® ã¾ãˆ ã« ãŸãã—ãƒ¼ ãŒ ã‚ã‚Šã¾ã™ã€‚ ãã® ãŸãã—ãƒ¼ ã¯ ã‚„ã™ã„ ã§ã™ã€‚' },
    ];

    // -------------- State & Elements --------------
    let deck = [];
    let index = 0;
    let showingFront = true;

    const els = {
      mode: document.getElementById('mode'),
      card: document.getElementById('card'),
      label: document.getElementById('label'),
      main: document.getElementById('main'),
      sub: document.getElementById('sub'),
      hira: document.getElementById('hira'),
      counter: document.getElementById('counter'),
      bar: document.getElementById('bar'),
      btnPrev: document.getElementById('btnPrev'),
      btnNext: document.getElementById('btnNext'),
      btnFlip: document.getElementById('btnFlip'),
      btnShuffle: document.getElementById('btnShuffle'),
      mcArea: document.getElementById('mcArea'),
    };

    // Helpers
    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]} return arr; }
    const ALL_QUIZ_WORDS = Array.from(new Set(
      ['car','bus','train','bicycle','motorcycle','truck','airplane','boat','subway','taxi']
    ));
    function mcOptionsFor(item, n=4){
      const corrects=item.answers.map(a=>a.toLowerCase());
      const pool=ALL_QUIZ_WORDS.filter(v=>!corrects.includes(v));
      shuffle(pool);
      return shuffle([corrects[0], ...pool.slice(0,n-1)]);
    }

    // Build deck
    function buildDeck(){
      const mode=els.mode.value;
      if(mode==='vocab-j2e' || mode==='vocab-e2j'){
        const combined=[...VEHICLES];
        deck=combined.map(x=>({
          type:'vocab',
          front:mode==='vocab-j2e'?x.ja:x.en,
          back:mode==='vocab-j2e'?x.en:x.ja,
          hira:x.hira,
          sideLabelFront:mode==='vocab-j2e'?'Japanese â†’ English':'English â†’ Japanese',
          sideLabelBack:mode==='vocab-j2e'?'English':'Japanese'
        }));
      } else if(mode==='sentences'){
        deck=SENTENCES.map(s=>({
          type:'sentence',
          front:s.ja,
          back:s.en+'\n'+s.ja,
          hira:s.hira,
          sideLabelFront:'Japanese sentence',
          sideLabelBack:'Answer'
        }));
      } else if(mode==='qa'){
        deck=QA.map(q=>({
          type:'qa',
          front:q.q_ja,
          back:q.a_en+'\n'+q.a_ja,
          hira:q.q_hira+'\n'+q.a_hira,
          sideLabelFront:'Question (JA)',
          sideLabelBack:'Answer'
        }));
      } else if(mode==='quiz'){
        deck=QUIZ.map(q=>({
          type:'quiz',
          front:q.cloze,
          back:q.full+'\n'+q.ja,
          hira:q.hira,
          answers:q.answers,
          choices:mcOptionsFor(q,4),
          sideLabelFront:'Choose',
          sideLabelBack:'Answer'
        }));
      } else if(mode==='reading'){
        deck=READINGS.map(r=>({
          type:'reading',
          front:r.ja,
          back:r.en+'\n'+r.ja,
          hira:r.hira,
          sideLabelFront:'Reading (JA)',
          sideLabelBack:'Reading (EN+JA)'
        }));
      } else { deck=[]; }
      index=0;showingFront=true;render();
    }

    // Render
    function render(){
      if(deck.length===0){els.main.textContent='â€”'; els.sub.textContent='Choose a mode'; return;}
      const item=deck[index];
      els.label.textContent=showingFront?item.sideLabelFront:item.sideLabelBack;
      const content=showingFront?item.front:item.back;
      if(!showingFront && content.includes('\n')){
        const [en,ja]=content.split('\n');
        els.main.innerHTML=`<div style="font-size:22px;font-weight:700">${en}</div><div class="sub">${ja}</div>`;
      } else { els.main.textContent=content; }
      if(item.hira){ els.hira.classList.remove('hidden'); els.hira.textContent=item.hira; } 
      else { els.hira.classList.add('hidden'); els.hira.textContent=''; }
      if(item.type==='quiz' && showingFront){
        els.mcArea.classList.remove('hidden'); els.mcArea.innerHTML='';
        item.choices.forEach(opt=>{
          const btn=document.createElement('button'); btn.className='optbtn'; btn.textContent=opt;
          btn.addEventListener('click',e=>{
            e.preventDefault();
            const norm=s=>s.toLowerCase().trim();
            const isCorrect=item.answers.map(a=>norm(a)).includes(norm(opt));
            if(isCorrect){
              btn.classList.add('ok');
              [...els.mcArea.querySelectorAll('button')].forEach(b=>b.disabled=true);
              setTimeout(()=>{showingFront=false;render();},350);
            } else {
              btn.classList.add('bad'); btn.disabled=true;
            }
          });
          els.mcArea.appendChild(btn);
        });
      } else { els.mcArea.classList.add('hidden'); els.mcArea.innerHTML=''; }
      els.counter.textContent=`${index+1} / ${deck.length}`; els.bar.style.width=`${((index+1)/deck.length)*100}%`;
    }

    // Navigation
    function prev(){index=(index-1+deck.length)%deck.length;showingFront=true;render();}
    function next(){index=(index+1)%deck.length;showingFront=true;render();}
    function flip(){showingFront=!showingFront;render();}
    function shuffleDeck(){deck=shuffle(deck);index=0;showingFront=true;render();}

    // Events
    els.mode.addEventListener('change',buildDeck);
    document.getElementById('btnPrev').addEventListener('click',prev);
    document.getElementById('btnNext').addEventListener('click',next);
    document.getElementById('btnFlip').addEventListener('click',flip);
    document.getElementById('btnShuffle').addEventListener('click',shuffleDeck);
    window.addEventListener('keydown',e=>{if(e.code==='ArrowLeft')prev(); else if(e.code==='ArrowRight')next(); else if(e.code==='Space'){e.preventDefault();flip();}});

    // Init
    buildDeck();
  </script>
</body>
</html>
